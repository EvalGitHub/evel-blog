(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{431:function(t,e){t.exports="data:image/png;base64,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"},544:function(t,e,r){"use strict";r.r(e);var a=r(28),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-router参数解析-以及怎么匹配组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router参数解析-以及怎么匹配组件"}},[t._v("#")]),t._v(" vue router参数解析，以及怎么匹配组件")]),t._v(" "),a("h2",{attrs:{id:"vue-router的路径解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router的路径解析"}},[t._v("#")]),t._v(" vue router的路径解析")]),t._v(" "),a("ul",[a("li",[t._v("初始化的时候")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("function getLocation (base) {\n  var path = decodeURI(window.location.pathname);\n  if (base && path.indexOf(base) === 0) {\n    path = path.slice(base.length);\n  }\n  return (path || '/') + window.location.search + window.location.hash\n}\n")])])]),a("p",[t._v("在路由初始化的时候(VueRouter.prototype.init中)，需要vueRouter自动解析地址信息，获取当前的路由信息，将对应的组件显示在页面上。")]),t._v(" "),a("ul",[a("li",[t._v("通过导航切换")])]),t._v(" "),a("p",[t._v("使用this.$router.push方法进行路由切换时")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("this.$router.push('/')\n")])])]),a("p",[t._v("以及使用router-link导航时")]),t._v(" "),a("p",[a("img",{attrs:{src:r(431),alt:"avatar"}})]),t._v(" "),a("p",[t._v("都是会将对应的路由名字或者路径传入，\n接下来就是需要按照这个值去找到对应的组件信息")]),t._v(" "),a("h2",{attrs:{id:"获取路径对应的组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取路径对应的组件"}},[t._v("#")]),t._v(" 获取路径对应的组件")]),t._v(" "),a("p",[t._v("在VueRouter初始化的时候会，执行")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  this.matcher = createMatcher(options.routes || [], this);\n")])])]),a("p",[t._v("createMatcher中的createRouteMap方法会对routes路由配置进行遍历，形成pathList（路径集合），pathMap（路径key与组件信息val的对象）\nnameMap（路由名key与组件信息val的对象）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// createRouteMap 代码片段\n\nroutes.forEach(function (route) {\n  addRouteRecord(pathList, pathMap, nameMap, route);\n});\n.....\n..... \nreturn {\n  pathList: pathList, // 所有路由路径path集合\n  pathMap: pathMap,   // 所有path - 组件信息record形成的对象\n  nameMap: nameMap    // 所有name - 组件信息record形成的对象\n}\n")])])]),a("p",[t._v("每一次的路由更新都是调用this.$transitionTo方法，其中调用了\nthis$1.updateRoute(route)更新了this.current = route;")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("History.prototype.updateRoute = function updateRoute (route) {\n  var prev = this.current;\n  this.current = route; \n  this.cb && this.cb(route); \n  this.router.afterHooks.forEach(function (hook) {\n    hook && hook(route, prev);\n  });\n};\n")])])]),a("p",[t._v("在组件RouterView中根据current获取对应的组件信息，然后重新渲染")]),t._v(" "),a("h3",{attrs:{id:"到目前为止我们已经能正确获取到当前路由的对应组件信息-那怎么实现-routerview的视图更新呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#到目前为止我们已经能正确获取到当前路由的对应组件信息-那怎么实现-routerview的视图更新呢"}},[t._v("#")]),t._v(" 到目前为止我们已经能正确获取到当前路由的对应组件信息，那怎么实现，routerView的视图更新呢？？")]),t._v(" "),a("p",[t._v("先看")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Vue.mixin({\n  beforeCreate: function beforeCreate () {\n    if (isDef(this.$options.router)) {\n      this._routerRoot = this;\n      this._router = this.$options.router;\n      this._router.init(this); \n      Vue.util.defineReactive(this, '_route', this._router.history.current);\n    } else {\n      this._routerRoot = (this.$parent && this.$parent._routerRoot) || this;\n    }\n    registerInstance(this, this);\n  },\n  ....\n  .....\n});\n")])])]),a("p",[t._v("这里可以很清楚的看到将vue的“_route”属性定义为响应式的，因此这个“_route”只要发生改变就会触发视图的的更新")]),t._v(" "),a("p",[t._v("this.cb && this.cb(route); 的实现关键代码")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 定义listen\nHistory.prototype.listen = function listen (cb) {\n  this.cb = cb;\n};\n\n// init中调用\n\nhistory.listen(route => { // \n  this.apps.forEach((app) => { // apps是vue实例\n    app._route = route\n  })\n})\n")])])]),a("p",[a("strong",[t._v("router-view的核心代码")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 这里这是关键代码\nvar route = parent.$route;\nvar matched = route.matched[depth];\nvar component = cache[name] = matched.components[name];\n")])])]),a("p",[t._v("重新渲染")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".....\nreturn h(component, data, children)\n")])])]),a("h2",{attrs:{id:"自己实现一个简易的vue-router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自己实现一个简易的vue-router"}},[t._v("#")]),t._v(" 自己实现一个简易的vue-router")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/5e5b6906518825492a7207b4",target:"_blank",rel:"noopener noreferrer"}},[t._v("自己写一个vue-router"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=s.exports}}]);