(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{526:function(e,t,r){"use strict";r.r(t);var n=r(28),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"mob-reactçš„ä½¿ç”¨"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mob-reactçš„ä½¿ç”¨"}},[e._v("#")]),e._v(" mob-reactçš„ä½¿ç”¨")]),e._v(" "),r("h2",{attrs:{id:"ä½¿ç”¨æ³¨æ„"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨æ³¨æ„"}},[e._v("#")]),e._v(" ä½¿ç”¨æ³¨æ„")]),e._v(" "),r("ul",[r("li",[e._v("å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨class componentså°±ä½¿ç”¨mobx-react@5")]),e._v(" "),r("li",[e._v("å¦‚æœé¡¹ç›®ä¸­æ—¢æœ‰class components å’Œ hookså°±ä½¿ç”¨mobx-react@6 (åŒ…å«mobx-react-lite)")]),e._v(" "),r("li",[e._v("å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰class componentså°±ä½¿ç”¨mobx-react-lite")])]),e._v(" "),r("p",[r("strong",[e._v("noteï¼š")])]),e._v(" "),r("blockquote",[r("p",[e._v("The Provider/inject in mobx-react@6 has been migrated to React Context, however it might be removed in future versions completely. Consider using Context directly.")])]),e._v(" "),r("h2",{attrs:{id:"çŠ¶æ€ç®¡ç†"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç®¡ç†"}},[e._v("#")]),e._v(" çŠ¶æ€ç®¡ç†")]),e._v(" "),r("h3",{attrs:{id:"åˆ›å»ºstate"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºstate"}},[e._v("#")]),e._v(" åˆ›å»ºstate")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("import { observable } from 'mobx'\nimport { useLocalStore } from 'mobx-react' // 6.x or mobx-react-lite@1.4.0\nfunction CreatingState() {\n  const simpleState = React.useRef(observable.array([1, 2, 3])).current\n  const localState = useLocalStore(() => ({\n    count: 0,\n    inc() {\n      localState.count += 1\n    },\n  }))\n  return <Rendering simple={simpleState}  local={localState} />\n}\n")])])]),r("h3",{attrs:{id:"è·å–state"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#è·å–state"}},[e._v("#")]),e._v(" è·å–state")]),e._v(" "),r("p",[r("strong",[e._v("æ–¹å¼ä¸€ï¼š")]),e._v(" åˆ›å»ºstateï¼Œé€šè¿‡useReducer\n"),r("strong",[e._v("æ–¹å¼äºŒï¼š")]),e._v(" åˆ›å»ºstateï¼Œé€šè¿‡propsä¼ é€’\n"),r("strong",[e._v("æ–¹å¼ä¸‰ï¼š")]),e._v(" å…¨å±€åˆ›å»ºï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹import\n"),r("strong",[e._v("æ–¹å¼å››ï¼š")]),e._v(" ä½¿ç”¨React.context")]),e._v(" "),r("p",[r("strong",[e._v("useLocalStore")])]),e._v(" "),r("p",[e._v("åœ¨ç»„ä»¶å†…éƒ¨å¯ä»¥ä½¿ç”¨useLocalStoreåˆ›å»ºå±€éƒ¨çš„å¯è§‚æµ‹çš„stateï¼ˆuseLocalStoreä¹Ÿå¯ç”¨ä¸åˆ›å»ºå…¨å±€stateï¼‰")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("import React from 'react'\nimport { useLocalStore, useObserver } from 'mobx-react' // 6.x\n\nexport const SmartTodo = () => {\n  const todo = useLocalStore(() => ({\n    title: 'Click to toggle',\n    done: false,\n    toggle() {\n      todo.done = !todo.done\n    },\n    get emoji() {\n      return todo.done ? 'ğŸ˜œ' : 'ğŸƒ'\n    },\n  }))\n\n  return useObserver(() => (\n    <h3 onClick={todo.toggle}>\n      {todo.title} {todo.emoji}\n    </h3>\n  ))\n}\n")])])]),r("h2",{attrs:{id:"åŒºåˆ«observer-useobserver-observer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#åŒºåˆ«observer-useobserver-observer"}},[e._v("#")]),e._v(" åŒºåˆ«Observer, useObserver, observer")]),e._v(" "),r("p",[e._v("æ²¡ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œåªæ˜¯å†™æ³•ä¸ä¸€æ ·ï¼ˆObserver, useObserveråªèƒ½åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼‰")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("import { observable } from 'mobx'\nimport { Observer, useObserver, observer } from 'mobx-react' // 6.x or mobx-react-lite@1.4.0\nimport ReactDOM from 'react-dom'\n\nconst person = observable({\n  name: 'John',\n})\n\n// named function is optional (for debugging purposes)\nconst P1 = observer(function P1({ person }) {\n  return <h1>{person.name}</h1>\n})\n\nconst P2 = ({ person }) => <Observer>{() => <h1>{person.name}</h1>}</Observer>\n\nconst P3 = ({ person }) => {\n  return useObserver(() => <h1>{person.name}</h1>)\n}\n\nReactDOM.render(\n  <div>\n    <P1 person={person} />\n    <P2 person={person} />\n    <P3 person={person} />\n  </div>,\n)\n\nsetTimeout(() => {\n  person.name = 'Jane'\n}, 1000)\n")])])]),r("h2",{attrs:{id:"å®æˆ˜ä¾‹å­"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜ä¾‹å­"}},[e._v("#")]),e._v(" å®æˆ˜ä¾‹å­")]),e._v(" "),r("ol",[r("li",[e._v("åˆ›å»ºä¸€ä¸ªstore [counter_store.tsx]")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("import { observable, action, computed } from 'mobx';\nexport class CounterStore {\n  @observable \n  count = 0;\n\n  @action\n  increment() {\n    this.count++:\n  }\n\n  @action \n  decrement() {\n    this.count--;\n  }\n\n  @computed\n  get doubleCount() {\n    return this.count *2;\n  }\n}\n")])])]),r("ol",{attrs:{start:"2"}},[r("li",[e._v("ç„¶ååœ¨å…¨å±€contextä¸Šæ³¨å†Œstore [store.tsx]")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("import React from 'react';\nimport { CounterStore } from \"./counter_store\";\n\nexport const storeContext = React.createContext({\n  counterStore: new CounterStore()\n})\n\nexport const useStores = () => React.useContext(storeContext);\n")])])]),r("ol",{attrs:{start:"3"}},[r("li",[e._v("ç„¶ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨è¿™ä¸ªcontext")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('import React from "react";\nimport { observer } from "mobx-react";\nimport { useStores } from "../store";\n\nexport const Counter = observer(() => {\n  const { counterStore } = useStores();\n  return (\n    <>\n      <div>{counterStore.count}</div>\n      <button onClick={() => counterStore.increment()}>++</button>\n      <button onClick={() => counterStore.decrement()}>--</button>\n    </>\n  );\n});\n')])])]),r("p",[r("a",{attrs:{href:"https://codesandbox.io/s/mobx-reactpeihecontextdeshiyongfangfa-1hol6?file=/src/component/friend_make.tsx",target:"_blank",rel:"noopener noreferrer"}},[e._v("å®è·µä¾‹å­"),r("OutboundLink")],1),e._v("ï¼Œ"),r("a",{attrs:{href:"https://mobx-react.js.org/recipes-migration",target:"_blank",rel:"noopener noreferrer"}},[e._v("mobx-reactæ•™ç¨‹"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);