(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{568:function(e,n,r){"use strict";r.r(n);var t=r(28),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"实现一个简单的脚手架"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实现一个简单的脚手架"}},[e._v("#")]),e._v(" 实现一个简单的脚手架")]),e._v(" "),r("blockquote",[r("p",[e._v("最终的效果就是执行一个自定义的命令生成一个简易的项目")])]),e._v(" "),r("h2",{attrs:{id:"常用工具"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#常用工具"}},[e._v("#")]),e._v(" 常用工具")]),e._v(" "),r("ul",[r("li",[e._v("commander.js，可以自动的解析命令和参数，用于处理用户输入的命令")]),e._v(" "),r("li",[e._v("download-git-repo，下载并提取 git 仓库，用于下载项目模板")]),e._v(" "),r("li",[e._v("Inquirer.js，通用的命令行用户界面集合，用于和用户进行交互")]),e._v(" "),r("li",[e._v("handlebars.js，模板引擎，将用户提交的信息动态填充到文件中")]),e._v(" "),r("li",[e._v("ora，下载过程久的话，可以用于显示下载中的动画效果")]),e._v(" "),r("li",[e._v("chalk，可以给终端的字体加上颜色")]),e._v(" "),r("li",[e._v("log-symbols，可以在终端上显示出 √ 或 × 等的图标")])]),e._v(" "),r("h2",{attrs:{id:"实现步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实现步骤"}},[e._v("#")]),e._v(" 实现步骤")]),e._v(" "),r("h3",{attrs:{id:"初始化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[e._v("#")]),e._v(" 初始化")]),e._v(" "),r("ul",[r("li",[e._v("创建基本的git环境")])]),e._v(" "),r("blockquote",[r("p",[e._v("git init")])]),e._v(" "),r("ul",[r("li",[e._v("创建bin/app.js")])]),e._v(" "),r("h3",{attrs:{id:"使用commander解析命令和参数-处理用户输入的命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用commander解析命令和参数-处理用户输入的命令"}},[e._v("#")]),e._v(" 使用commander解析命令和参数｜处理用户输入的命令")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("#! /usr/bin/env node\n// 就是解决了不同的用户node路径不同的问题，可以让系统动态的去查找node来执行你的脚本文件\n\nconst program = require('commander');\nconst _v = require('../package.json').version;\nprogram\n  .version(_v)\n  .usage('evel-react-cli name')\n  .parse(process.argv)\n")])])]),r("p",[r("a",{attrs:{href:"https://juejin.cn/post/6844903826344902670",target:"_blank",rel:"noopener noreferrer"}},[e._v("#!/usr/bin/env node 到底是什么？"),r("OutboundLink")],1)]),e._v(" "),r("blockquote",[r("p",[e._v("执行 'npm link'，'evel-react-cli -h'")])]),e._v(" "),r("h3",{attrs:{id:"使用chalk对console美工"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用chalk对console美工"}},[e._v("#")]),e._v(" 使用chalk对console美工")]),e._v(" "),r("blockquote",[r("p",[e._v("chalk，可以给终端的字体加上颜色")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("// init start\nfunction generator() {\n  if (!program.args[0]) { // 如果没有输入文件名\n    console.log(chalk.red('\\n file directory is required!'));\n    console.log(chalk.red('\\n run $ evel-react-cli dirname \\n'));\n    return;\n  } else if (is_dir_file_exist(_targetFileDest)) { // 文件是否存在\n    inquireForCopyFile();\n    return;\n  }\n  // copyFile();\n  downloadFileFromGithub();\n}\ngenerator();\n")])])]),r("h3",{attrs:{id:"通过命令行对用户界面操作-用于和用户进行交互"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#通过命令行对用户界面操作-用于和用户进行交互"}},[e._v("#")]),e._v(" 通过命令行对用户界面操作，用于和用户进行交互")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("// inquire for user action\nfunction inquireForCopyFile() {\n  let promps = [\n    {\n      type: 'confirm',\n      name: 'coverFile',\n      message: '是否覆盖文件继续操作？',\n    }\n  ];\n  inquirer.prompt(promps).then(function (answers) {\n    if (answers.coverFile) { // 如果yes\n      // copyFile();\n      downloadFileFromGithub(); // 从git上下载模板\n    }\n  })\n}\n")])])]),r("h3",{attrs:{id:"通过download-git-repo从git下载模板"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#通过download-git-repo从git下载模板"}},[e._v("#")]),e._v(" 通过download-git-repo从git下载模板")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("// dowload file from github\nfunction downloadFileFromGithub() {\n  const spinner = ora(\"正在初始化项目...\\n\").start(); // 可以给终端的字体加上颜色\n  spinner.color = 'green';\n  // github is must public\n  download('github:EvalGitHub/webpack_reactJS#master', _targetFileDest, function(err) {\n    if (err) {\n      console.error(err);\n      spinner.stop();\n      return;\n    }\n    if (!err) {\n      // editFile({ version: '1.1', projectName: 'test'});\n      spinner.stop();\n      console.log('项目模版初始化成功...\\n');\n      console.log(`\\n cd ${program.args[0]}\\n`);\n      console.log(chalk.green('run $ npm install \\n'));\n    }\n  })\n}\n")])])]),r("p",[r("a",{attrs:{href:"https://github.com/EvalGitHub/evel_react_cli.git",target:"_blank",rel:"noopener noreferrer"}},[e._v("脚手架源码"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://juejin.cn/post/6844903875808346120",target:"_blank",rel:"noopener noreferrer"}},[e._v("搭建一个nodeJs脚手架"),r("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=a.exports}}]);