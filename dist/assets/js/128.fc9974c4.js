(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{596:function(e,t,n){"use strict";n.r(t);var r=n(28),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"手写代码篇"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手写代码篇"}},[e._v("#")]),e._v(" 手写代码篇")]),e._v(" "),n("h2",{attrs:{id:"深拷贝"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#深拷贝"}},[e._v("#")]),e._v(" 深拷贝")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function deepClone(obj) {\n  if (typeof obj !== 'object' || typeof obj === 'null') return obj;\n  let newObj = obj instanceof Array  ? [] : {}; // 重点\n  for(let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      newObj[key] = typeof obj[key] === 'object' ? deepClone(obj[key]) : obj[key];\n    }\n  }\n  return newObj;\n}\n")])])]),n("h2",{attrs:{id:"事件防抖-节流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件防抖-节流"}},[e._v("#")]),e._v(" 事件防抖，节流")]),e._v(" "),n("ol",[n("li",[e._v("节流")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let timer = null;\nfunction debounce1(fun, delayTime) {\n  if (timer) {\n    return;\n  }\n  timer = setTimeout(() => {\n    fun();\n    clearTimeout(timer);\n    timer = null;\n  }, delayTime);\n}\n")])])]),n("p",[e._v("使用场景：模糊搜索匹配")]),e._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[e._v("防抖")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let timer = null;\nfunction debounce2(fun, delayTime) {\n  if (timer) {\n    clearTimeout(timer);\n    timer = null;\n  }\n  timer = setTimeout(() => {\n    fun();\n    // clearTimeout(timer);\n    // timer = null;\n  }, delayTime)\n}\n\n")])])]),n("p",[e._v("使用场景：防止重复点击（接口调用，用户下载apk），百度搜索")]),e._v(" "),n("p",[n("strong",[e._v("区别：")]),e._v("\n节流在用户连续点击的时候仍然会按照延时时间执行，而防抖则需要用户点击操作停止之后才会执行。\n并且可以发现“节流”不能保证最后一次输入被执行，有误差")]),e._v(" "),n("h2",{attrs:{id:"手写-200个异步任务-控制最多同时100并发执行的大致思路"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手写-200个异步任务-控制最多同时100并发执行的大致思路"}},[e._v("#")]),e._v(" 手写 200个异步任务 控制最多同时100并发执行的大致思路")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function createPipeFetch(limit, dataArr) {\n  let _tmpFetchArr = [];\n  function createFetch(data) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve(data);\n      }, 3000)\n    }).then(res => {\n      console.log('data', data);\n      // 每次执行完，都要向数据中添加新的promise\n      dataArr.length > 0 &&  _tmpFetchArr.push(createFetch(dataArr.shift()));\n    })\n  }\n  if (limit < dataArr.length) { // 如果最大并发数大于数组长度\n    while(limit > 0) {\n      _tmpFetchArr.push(createFetch(dataArr.shift()));\n      --limit;\n    }\n  } else {\n    [].concat(dataArr).forEach((item) => {\n      _tmpFetchArr.push(createFetch(item));\n      dataArr = [];\n    })\n  }\n  return Promise.all(_tmpFetchArr);\n}\ncreatePipeFetch(2, [1,2,3,4,5,6,7])\n")])])]),n("h2",{attrs:{id:"手写一个函数迭代器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手写一个函数迭代器"}},[e._v("#")]),e._v(" 手写一个函数迭代器")]),e._v(" "),n("p",[e._v("var arr = [1,4,5,6,7];")]),e._v(" "),n("p",[e._v("for(let val of arr) {\nconsole.log(var);\n}")]),e._v(" "),n("p",[e._v("输出结果是2,5,6,7,8")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("var arr = [1,4,5,6,7];\narr[Symbol.iterator] = function() {\n  let index = 0;\n  return {\n    next: () => ({\n      value: arr[index++] + 1,\n      done: index > arr.length ? true : false\n    })\n  }\n}\n\nfor(let val of arr) {\n  console.log(val);\n}\n")])])]),n("h2",{attrs:{id:"手写原生ajax"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手写原生ajax"}},[e._v("#")]),e._v(" 手写原生ajax")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function getXhr() {\n  var xhr = null;\n  if (window.XMLHttpRequest) {\n    xhr = new XMLHttpRequest();\n  } else {\n    xhr = new ActiveXObject(\"Microsoft.XMLHTTP\")\n  }\n  return xhr;\n}\n\nfunction createFetch(url, method) {\n  let xhr = getXhr();\n  xhr.open(url, method, true); // true异步\n  if (method === 'get') {\n    xhr.send();\n  } else if (method === 'post') {\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.send('name=Tom&age=ee');\n  }\n  return xhr.onReadyStateChange = function() {\n    return new Promise((resolve, reject) => {\n      if (xhr.readyState === 4) {\n        /*\n          0： 初始化，还未建立链接\n          1: 服务器连接已建立\n          2: 请求已接收\n          3: 请求处理中\n          4: 请求已完成，且响应已就绪\n        */\n        if (xhr.status === 200) {\n          resolve(xhr.responseText)\n        } else {\n          reject(xhr.responseText);\n        }\n      }\n    })\n  }\n}\n\ncreateFetch('http://ewewr', 'get').then((res) => {\n  console.log(res);\n}).catch(err => {\n  console.log(err);\n});\n")])])]),n("h2",{attrs:{id:"手写flat函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手写flat函数"}},[e._v("#")]),e._v(" 手写flat函数")]),e._v(" "),n("p",[e._v("Array.flat")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let arr = [1, 2, [3, 4]];\n\n// To flat single level array\narr.flat(1); // [1, 2, 3, 4]\n")])])]),n("p",[e._v("实现上面的函数：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function flatArray(arr, depth = 1) {\n  return depth > 0 ? arr.reduce((initArr, val) => {\n    return initArr.concat(Array.isArray(val) ? flatArray(val, --depth) : val);\n  },[]): arr.slice()\n}\nflatArray(arr, 0)\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);