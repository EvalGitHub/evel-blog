(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{580:function(t,e,n){"use strict";n.r(e);var a=n(28),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"如何获取localstorage已使用空间-以及最大存储空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何获取localstorage已使用空间-以及最大存储空间"}},[t._v("#")]),t._v(" 如何获取localStorage已使用空间，以及最大存储空间")]),t._v(" "),n("h2",{attrs:{id:"已使用空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#已使用空间"}},[t._v("#")]),t._v(" 已使用空间")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function getUsedSize() {\n  let count = 0;\n  Object.keys(localStorage).forEach(itmeKey => {\n    count += localStorage[itmeKey].length;\n  })\n  console.log(count / 1024 / 1024 + 'M');\n} \n")])])]),n("p",[t._v("英文和数字占一个字节(bit)，1024bit = 1kb ，1024kb = 1G\n中文占一个字符，也就是两个字节\n一个字节等于 8 位。所有的数据所占空间都可以用字节数来衡量。例如一个字符占 2 个字节，一个 int 占 4 个字节，一个 double 占 8 个字节 等等。")]),t._v(" "),n("h2",{attrs:{id:"全部空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全部空间"}},[t._v("#")]),t._v(" 全部空间")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function getTotalSize() {\n  let text= '1234567890';\n  function addTextStr(str) {\n    text+=str;\n    if (text.length < 10240) { // 10kb的字符串\n      addTextStr(text);\n    }\n  }\n  addTextStr(text);\n\n  if (!window.localStorage) {\n    return;\n  }\n  let timer = setInterval(() => {\n    text+=text;\n    try {\n      window.localStorage.removeItem('countStr');\n      window.localStorage.setItem('countStr', text);\n    } catch(e) {\n      clearTimeout(timer);\n      console.log('容积就是：' + text.length / 1024 / 1024 + 'M');\n    }\n  }, 0);\n}\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);